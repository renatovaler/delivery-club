{
  "name": "TeamSubscriptionHistory",
  "type": "object",
  "properties": {
    "team_id": {
      "type": "string",
      "description": "ID da empresa"
    },
    "plan_id": {
      "type": "string",
      "description": "ID do plano"
    },
    "plan_name": {
      "type": "string",
      "description": "Nome do plano no momento da assinatura"
    },
    "plan_price": {
      "type": "number",
      "description": "Preço do plano no momento da assinatura"
    },
    "start_date": {
      "type": "string",
      "format": "date",
      "description": "Data de início da assinatura deste plano"
    },
    "end_date": {
      "type": "string",
      "format": "date",
      "description": "Data de fim da assinatura deste plano (null se ainda ativo)"
    },
    "status": {
      "type": "string",
      "enum": [
        "active",
        "cancelled",
        "expired"
      ],
      "default": "active",
      "description": "Status da assinatura"
    },
    "stripe_subscription_id": {
      "type": "string",
      "description": "ID da assinatura no Stripe"
    },
    "invoice_date": {
      "type": "string",
      "format": "date",
      "description": "Data da fatura para este período"
    },
    "invoice_amount": {
      "type": "number",
      "description": "Valor cobrado nesta fatura"
    },
    "payment_date": {
      "type": "string",
      "format": "date",
      "description": "Data em que o pagamento foi processado"
    },
    "payment_status": {
      "type": "string",
      "enum": [
        "pending",
        "paid",
        "failed",
        "cancelled"
      ],
      "default": "pending",
      "description": "Status do pagamento da fatura"
    },
    "stripe_invoice_id": {
      "type": "string",
      "description": "ID da fatura no Stripe"
    },
    "stripe_payment_intent_id": {
      "type": "string",
      "description": "ID do payment intent no Stripe"
    },
    "billing_period_start": {
      "type": "string",
      "format": "date",
      "description": "Início do período de cobrança"
    },
    "billing_period_end": {
      "type": "string",
      "format": "date",
      "description": "Fim do período de cobrança"
    },
    "notes": {
      "type": "string",
      "description": "Observações sobre a fatura ou pagamento"
    }
  },
  "required": [
    "team_id",
    "plan_id",
    "plan_name",
    "plan_price",
    "start_date"
  ]
}